<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">
    <title>Cluster</title>

    <link href="Javascript/ArcGISAPI/3.16/dijit/themes/tundra/tundra.css" rel="stylesheet" />
    <!--<link rel="stylesheet" href="https://js.arcgis.com/3.20/esri/css/esri.css">-->
    <link href="Javascript/ArcGISAPI/3.16/esri/css/esri.css" rel="stylesheet" />

    <link href="css/base.css" rel="stylesheet" />
    <link href="css/gisframe.css" rel="stylesheet" />
    <link href="style/bootstrap.css" rel="stylesheet" />
    <!--<link href="css/layout.css" rel="stylesheet" />-->
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            margin: 0;
            padding: 0;
        }

        /* center the image in the popup */
        /*.esriViewPopup .gallery {
            margin: 0 auto !important;
        }*/

        /*.gradient {
            background: #00f;
            background: -moz-linear-gradient(top, #0050ff 0%, #ffffff 100%);
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0050ff), color-stop(100%,#ffffff));
            background: -webkit-linear-gradient(top, #0050ff 0%,#ffffff 100%);
            background: -o-linear-gradient(top, #0050ff 0%,#ffffff 100%);
            background: -ms-linear-gradient(top, #0050ff 0%,#ffffff 100%);
            background: linear-gradient(to bottom, #0050ff 0%,#ffffff 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0050ff', endColorstr='#ffffff',GradientType=0 );
        }

        :root .gradient {
            filter: none;
        }*/

        /*text {
            stroke: #f00;
            stroke-width: 2px;
            -webkit-text-stroke: 2px red;
            -ms-text-shadow: 0 1px white, 1px 0 white, -1px 0 white, 0 -1px white;
            -webkit-text-shadow: 0 1px white, 1px 0 white, -1px 0 white, 0 -1px white;
            filter: Glow(color=#fff,strength=2);
            filter: progid:DXImageTransform.Microsoft.Shadow(color=#fff,direction=45);
        }

        text {
            color: #000;
            text-shadow: #fff 1px 0 0,#fff 0 1px 0,#fff -1px 0 0,#fff 0 -1px 0;
            -webkit-text-shadow: #fff 1px 0 0,#fff 0 1px 0,#fff -1px 0 0,#fff 0 -1px 0;
            -moz-text-shadow: #fff 1px 0 0,#fff 0 1px 0,#fff -1px 0 0,#fff 0 -1px 0;
            *filter: Glow(color=#fff, strength=1);
        }*/
    </style>

    <script>
        // helpful for understanding dojoConfig.packages vs. dojoConfig.paths:
        // http://www.sitepen.com/blog/2013/06/20/dojo-faq-what-is-the-difference-packages-vs-paths-vs-aliases/
        //var dojoConfig = {
        //    paths: {
        //        extras: location.pathname.replace(/\/[^/]+$/, "") + "/extras"
        //    }
        //};
        var selfUrl = document.location.href.substring(0, document.location.href.lastIndexOf("/"));
        //  console.log(selfUrl);
        dojoConfig = {
            parseOnLoad: true,
            baseUrl: "Javascript/ArcGISAPI/3.16/dojo",
            packages: [
        {
            name: 'mapconfig',
            location: selfUrl + "/Javascript/config",
            main: "config"

        }, {
            name: 'extras',
            location: selfUrl + "/extras",
            main: "extras"

        }, {
            name: 'Framework',
            location: selfUrl + "/Javascript/Framework",
            main: "Framework"

        }
            ]
        }
    </script>
    <!--<script src="https://js.arcgis.com/3.20/"></script>-->
    <script src="Javascript/lib/jquery-2.1.4.js"></script>
    <script src="Javascript/lib/bootstrap.js"></script>
    <script src="Javascript/config/layerConfig.js"></script>
    <script src="Javascript/ArcGISAPI/3.16/init.js"></script>
    <script>
        var map;
        var ClusterData;
        var searchLayer;
        var tempLayer;
        var showClusterData = [];
        var statisticsData = [];
        var clusterType = [];
        var statisType = [];
        var clusterImg = [];
        var layerDType = [];
        var textColor = "#fff";
        var sssy = "";
        var ssqy = "";
        var firstAttr = "";
        var secendAttr = "";
        var currenturl = "";
        var currentattr = "";
        var searchField = "";
        var visiableArray = [0];
        var areasql = [];
        var dkType = "粮食生产功能区";
        var gnType = "功能区级别";
        var currentGraphic;
        var upLevel;
        var midLevel;
        var downLevel;
        var mapPanEvt;
        var fieldInfos;
        var areaClick;
        var typeNumber = [];
        var type = "farmArea";
        var bool = false;//控制area的显示
        var searchSql = "";
        var total = 0;//
        var blockNumber = [];
        require([
          "dojo/parser",
          "dojo/ready",
          "dojo/_base/array",
          "esri/Color",
          "dojo/dom-style",
          "dojo/query",
          "esri/layers/ImageParameters",
          "esri/map",
          "esri/request",
          "esri/graphic",
          "esri/geometry/Extent",

          "esri/symbols/SimpleMarkerSymbol",
          "esri/symbols/SimpleLineSymbol",
          "esri/symbols/SimpleFillSymbol",
          "esri/symbols/PictureMarkerSymbol",
          "esri/renderers/ClassBreaksRenderer",

          "esri/layers/GraphicsLayer",
          "esri/SpatialReference",
          "esri/InfoTemplate",
          "esri/dijit/PopupTemplate",
          "esri/geometry/Point",
          "esri/geometry/webMercatorUtils",
          "esri/layers/ArcGISDynamicMapServiceLayer",
          "TDTLayer2",
          "TDTLayer_Anno",
          "extras/ClusterLayer",
          "extras/ClusterLayer_M",

          "mapconfig",
          "dojo/on",
          "dojo/dom-class", "dojo/dom-style",
          "dijit/layout/BorderContainer",
          "dijit/layout/ContentPane",
          "dojo/domReady!"
        ], function (
          parser, ready, arrayUtils, Color, domStyle, query, ImageParameters,
          Map, esriRequest, Graphic, Extent,
          SimpleMarkerSymbol, SimpleLineSymbol, SimpleFillSymbol, PictureMarkerSymbol, ClassBreaksRenderer,
          GraphicsLayer, SpatialReference, InfoTemplate, PopupTemplate, Point, webMercatorUtils, ArcGISDynamicMapServiceLayer, TDTLayer, TDTLayer_Anno,
          ClusterLayer, ClusterLayer_M, mapconfig, on, domClass, domStyle
        ) {
            //ready(function () {
            //   parser.parse();
            //清除arcgis/rest/info?=json问题
            esri.config.defaults.io.corsDetection = false;

            upLevel = mapconfig.maxZoom;
            midLevel = mapconfig.maxZoom;
            downLevel = mapconfig.minZoom;
            var clusterLayer;
            var popupOptions = {
                "markerSymbol": new SimpleMarkerSymbol("circle", 20, null, new Color([0, 0, 0, 0.25])),
                "marginLeft": "20",
                "marginTop": "20"
            };
            var initextent = new Extent(120.135361472, 30.2208220636, 120.185361472, 30.2708220636, new SpatialReference({ wkid: 4326 }));
            var fullExtent = new Extent(118.33968849655, 29.1885894750343, 120.75238251614, 30.6257261531396, new SpatialReference({ "wkid": 4326 }));
            //   var zj = addZJBorder();
            //  console.log(zj);
            //  zjextent = new Extent(parseFloat(zj.xmin), parseFloat(zj.ymin), parseFloat(zj.xmax), parseFloat(zj.ymax), new SpatialReference({ "wkid": 4326 }));
            // console.log(zjextent);
            map = new Map("map", {
                // basemap: "topo",
                logo: false,
                slider: false,
                //   extent: fullExtent,
                center: [120.19, 30.26],
                  zoom: 6
            });
            // currenturl = "http://localhost:6080/arcgis/rest/services/lsService/MapServer";
            //  var lsLayer2 = new ArcGISDynamicMapServiceLayer(currenturl, { id: "ls2000" });
            var layer = new TDTLayer("img");//影像img 矢量 vec
            map.addLayer(layer, 0);
            searchLayer = new GraphicsLayer({ id: "searchLayer" });
            map.addLayer(searchLayer, 3);

            var annolayer = new TDTLayer_Anno("cia");//影像cia 矢量cva

            $(function () {
              
                //数组方法的扩展
                Array.prototype.indexOf = function (val) {
                    for (var i = 0; i < this.length; i++) {
                        if (this[i] === val) return i;
                    }
                    return -1;
                };
                Array.prototype.remove = function (val) {
                    var index = this.indexOf(val);
                    if (index > -1) {
                        this.splice(index, 1);
                    }
                };
                Array.prototype.contains = function (obj) {
                    var i = this.length;
                    while (i--) {
                        if (this[i] === obj||this[i]===obj.toString()) {
                            return true;
                        }
                    }
                    return false;
                }
                bindEvt();
                $("#proSelect a").eq(0).trigger("click");
              //  map.centerAndZoom([120.19, 30.26], 6);
                $(".infocontent").hide();
                setTimeout(initData, 300);

            })



            //初始化数据
            function initData() {
                sssy = "浙江";
                firstAttr = "粮食生产功能区";
                secondAttr = "功能区级别";
                searchField = layerConfig[firstAttr][secondAttr].searchField;
                jsonurl = layerConfig[firstAttr][secondAttr].jsondata;
                fieldInfos = layerConfig[firstAttr][secondAttr].fieldInfos;
                currenturl = layerConfig["粮食生产功能区"]["功能区级别"].url;
                visiableArray = layerConfig["粮食生产功能区"]["功能区级别"].array;
                clusterType = ["省级", "市级", "县级"];
                statisType = ["省级", "市级", "县级"];
                clusterImg = ["images/gis/省市县/省.png", "images/gis/省市县/市.png", "images/gis/省市县/县.png"];
                layerDType = ["'省级'", "'市级'", "'县级'"];
                currentattr = "建设等级";

                $.ajax({
                    url: jsonurl,
                    dataType: 'json',
                    type: "GET",
                    async: false,
                    data: {},
                    success: function (data) {
                        ClusterData = data.features;
                        //  $("#total").text(ClusterData.length);
                      //  getTotalNumber();
                    }

                });
                var popupTemplate = new PopupTemplate({
                    "title": "属性信息",
                    "content": "聚集点信息",
                    "fieldInfos": fieldInfos,
                });
                tempLayer = new GraphicsLayer({ id: "tempLayer", popupTemplate: popupTemplate });
                map.addLayer(tempLayer, 4);

                //    SwitchLayer.addZJCityBorder();    //添加统计图层
                // SwitchLayer.addZJCityNumber();
                //  switchLayer();
                map.on("extent-change", function () {
                    require(["Framework/SwitchLayer"], function (SwitchLayer) {
                        SwitchLayer.switchLayer();
                    });
                   
                    getblcok(sssy);
                    //var number = 0;
                    //for (let i = 0; i < typeNumber.length; i++) {
                    //    number += typeNumber[i].number;
                    //}
                    //$("#total").text(number);
                })


            }
            //绑定事件
            function bindEvt() {

                $(".MapMenu a").on("mouseover", function () {
                    $(this).children("label").show();

                })
                $(".MapMenu a").on("mouseout", function () {
                    $(this).children("label").hide();

                })

                $(".MapMenu input").on("click", function (event) {
                    console.log($(this).attr("value"));


                    //console.log($(e).attr("value"));
                    if ($(this).attr("value") == "矢量注记") {
                        if ($(this).attr("data-state") == "uncheck") {

                            //  var layer = new TDTLayer("vec");//影像img 矢量 vec
                            //   map.addLayer(layer, 0);
                            var annolayer = new TDTLayer_Anno("cva");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {
                            //var rmap_anno = map.getLayer("map_cva");
                            //if (rmap_anno) {
                            //    map.removeLayer(rmap_anno);
                            //}
                            if ($("#map_cva")) {
                                $("#map_cva").remove();
                            }
                            $(this).attr("data-state", "uncheck")

                        }

                    } else {
                        if ($(this).attr("data-state") == "uncheck") {

                            // var layer = new TDTLayer("img");//影像img 矢量 vec
                            //  map.addLayer(layer, 0);
                            var annolayer = new TDTLayer_Anno("cia");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {
                            if ($("#map_cia")) {
                                $("#map_cia").remove();
                            }

                            //var rmap_anno = map.getLayer("map_cia");
                            //if (rmap_anno) {
                            //    map.removeLayer(rmap_anno);

                            //}
                            $(this).attr("data-state", "uncheck")

                        }
                    }
                    //   event.stopPropagation();
                    // return false;
                })
                //空间分析工具事件
                var toorbarState = false;
                $("#toorbars").click(function (e) {
                    $("#Analyse-tools").toggle("slow");
                    if (toorbarState) {
                        $("#toorbars img").attr("src", "images/Ntool.png");
                        toorbarState = false;
                    } else {
                        $("#toorbars img").attr("src", "images/Ntool2.png");
                        toorbarState = true;
                    }

                }
                )
                $("#Analyse-tools li").click(function (e) {
                    var evt = e.currentTarget.childNodes[0].alt;
                    $("#Analyse-tools span").css("color", "#000");
                    $(this).children("span").css("color", "#0094ff");
                    switch (evt) {

                        case "框选查询":
                            if (currentLayerServiceUrl != "") {
                                drawState = 0;
                                toolbar.activate(esri.toolbars.Draw.RECTANGLE);
                                map.setMapCursor("crosshair");
                            } else {
                                alert("请切换到县级");
                                $(this).children("span").css("color", "#000");
                            }
                            break;
                        case "测量距离":
                            drawState = 1;
                            if (iQueryDk) {
                                iQueryDk.remove();
                                iQueryDk = "";
                            }

                            toolbar.activate(esri.toolbars.Draw.POLYLINE);
                            map.setMapCursor("crosshair");
                            break;
                        case "测量面积":
                            drawState = 1;
                            if (iQueryDk) {
                                iQueryDk.remove();
                                iQueryDk = "";
                            }
                            toolbar.activate(esri.toolbars.Draw.POLYGON);
                            map.setMapCursor("crosshair");
                            break;
                        case "统计分析":
                            if (toolbar) {
                                toolbar.deactivate();
                            }
                            //  addChartToMap();
                            // $("#Spatial").css("display", "block");
                            break;
                        case "清除高亮":
                            ClearMap();
                            hidePanel();
                            $("#Analyse-tools span").css("color", "#000");
                            break;

                    }

                })
                //给label绑定点击选中事件
                $(".checks").find("label").each(function () {
                    $(this).on("click", function () {
                        var attrName = $(this).parent().parent().parent().parent().attr("value");
                        console.log(attrName);
                     //   if (attrName!="") {
                            if ($(this).attr("data-state") == "uncheck") {
                                $(this).attr("data-state", "check");
                                $(this).addClass("active");
                                //add data to array
                                if (dkType == "粮食生产功能区") {
                                    clusterType.push($(this).next().text());
                                    layerDType.push("'" + $(this).next().text() + "'");
                                    clusterImg.push($(this).attr("imgvalue"));
                                } else if (dkType == "标准农田") {
                                    clusterType.push($(this).next().attr("value"));
                                    layerDType.push($(this).next().attr("value"));
                                    clusterImg.push($(this).attr("imgvalue"));
                                } else {
                                    clusterType.push($(this).next().text());
                                    layerDType.push("'" + $(this).next().text() + "'");
                                    clusterImg.push($(this).prev().prev().attr("src"));
                                }
                                statisType.push($(this).next().text());
                                console.log(clusterType);
                            } else {
                                $(this).attr("data-state", "uncheck");
                                $(this).removeClass("active");
                                //  clusterImg.remove($(this).prev().prev().attr("src"));
                                //  clusterType.remove($(this).next().text());
                                // layerDType.remove("'" + $(this).next().text() + "'");
                                if (dkType == "粮食生产功能区") {
                                    clusterType.remove($(this).next().text());
                                    layerDType.remove("'" + $(this).next().text() + "'");
                                    clusterImg.remove($(this).attr("imgvalue"));
                                } else if (dkType == "标准农田") {
                                    clusterType.remove($(this).next().attr("value"));
                                    layerDType.remove($(this).next().attr("value"));
                                    clusterImg.remove($(this).attr("imgvalue"));
                                } else {
                                    clusterType.remove($(this).next().text());
                                    layerDType.remove("'" + $(this).next().text() + "'");
                                    clusterImg.remove($(this).prev().prev().attr("src"));
                                }
                                statisType.remove($(this).next().text());
                            }
                            if (attrName != "") {
                               // getTotalNumber();
                                require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                    SwitchLayer.switchLayer();
                                });
                            } else {
                                clusterType.length = 0;
                                layerDType.length = 0;
                                clusterImg.length = 0;
                                statisType.length = 0;
                            }
                      //  }
                     
                        /// switchLayer();
                        //  $(this).prev().trigger("click");
                    })
                });
                //切换选择部分的js
                $(".btns").on("click", "li", function () {
                    // clusterType.length = 0;
                    if($(this).text()!="标准农田"){
                        $(this).addClass("active").siblings().removeClass("active");
                        var $index = $(this).index();
                        $(".infocontent .control").find("ul.second").eq($index).show().siblings("ul.second").hide();

                        $(".control").find("ul.second").eq($index).find("li").eq(0).trigger("click");
                    } else {
                        alert("暂无数据");
                    }
                 

                    // alert(2);


                });
                //点击二级目录
                $(".control").find(".second").each(function () {
                    $(this).on("click", "li", function () {
                        clusterType.length = 0;
                        clusterImg.length = 0;
                        layerDType.length = 0;
                        statisType.length = 0;
                        currentattr = "";
                        var rmap = map.getLayer("ls");
                        if (rmap) {
                            map.removeLayer(rmap);
                            if ($("#map_ls")) {
                                $("#map_ls").remove();
                            }
                        }
                        if (map.getLayer("clusters")) {
                            map.removeLayer(map.getLayer("clusters"));
                        }

                        $(this).addClass("active").siblings().removeClass("active");
                        var $clazz = $(this).attr("class");
                        $clazz = $clazz.split(" ");
                        var nyName;
                        $(".btns li").each(function (i, e) {
                            if ($(e).hasClass("active")) {
                                nyName = $(e).text();

                            }

                        })
                        dkType = nyName;
                        var secondName = $(this).text();
                        gnType = secondName;
                        // $(this).children("li").each(function())
                        var attr_Name;
                        $clazz.map(function (item) {
                            if (item != "active") {
                                var currentCheck = $(".checks").find("." + item);
                                currentCheck.show().siblings("ul").hide();
                                //  $(".checks").find("." + $clazz).show().siblings("ul").hide();
                                attr_Name = $(".checks").find("." + item).attr("value");
                                currentattr = attr_Name;
                                console.log(attr_Name);

                                var $types = $(".checks").find("." + item + " label");
                                //填充数组
                                // var $types = $(this).parent().children("label");
                                $types.each(function (i, e) {
                                    if ($(e).attr("data-state") == "check") {
                                        if (nyName == "粮食生产功能区") {
                                            clusterType.push($(e).next().text());
                                            
                                            layerDType.push("'" + $(e).next().text() + "'");
                                            clusterImg.push($(e).attr("imgvalue"));
                                        } else if (nyName == "标准农田") {
                                           // statisType
                                            clusterType.push($(e).next().attr("value"));
                                            layerDType.push($(e).next().attr("value"));
                                            clusterImg.push($(e).attr("imgvalue"));
                                        } else {
                                            clusterType.push($(e).next().text());
                                            layerDType.push("'" + $(e).next().text() + "'");
                                            clusterImg.push($(e).prev().prev().attr("src"));
                                        }
                                        statisType.push($(e).next().text());
                                        

                                    }
                                })
                            }
                        })

                        switch (secondName) {
                            case "提升工程":
                                clusterType.length = 0;
                                layerDType.length = 0;
                                statisType.length=0
                              //  $(".tsgc input").attr("disabled", true)
                                break;
                            case "现代农业综合区":
                                clusterType.length = 0;
                                layerDType.length = 0;
                                statisType.length = 0;
                              //  $(".xdny input").attr("disabled", true)
                                break;
                            default:
                                break;
                        }
                        if (nyName && secondName) {
                            currenturl = layerConfig[nyName][secondName].url;
                            visiableArray = layerConfig[nyName][secondName].array;
                            searchField = layerConfig[nyName][secondName].searchField;
                           // console.log(currenturl);
                        }
                        if (currenturl!="") {
                                                
                        fieldInfos = layerConfig[nyName][secondName].fieldInfos;
                        var url = layerConfig[nyName][secondName].jsondata;
                        $.ajax({
                            url: url,
                            dataType: 'json',
                            type: "GET",
                            async: true,
                            data: {},
                            success: function (data) {
                                // pointData = data;
                                ClusterData = data.features;
                                // addClusters(data);
                                require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                    SwitchLayer.switchLayer();
                                });
                               // getTotalNumber();
                            }
                        });                   
                        }
                        else {
                           // alert("暂无数据");
                            ClusterData.length = 0;
                            $("#total").html("");
                        }
                     

                    })
                });
                $("#function").click(function () {

                    if ($('#farmArea').is(':hidden')) {
                        $("#farmArea").show();
                        $("#cityArea").hide();
                        $(this).css("background-position-y", "0px");
                    } else {
                        $("#farmArea").hide();
                        $("#cityArea").hide();
                        $(this).css("background-position-y", "-10px");
                    }

                  


                    //if ($("#farmArea").is(":hidden") && $("#cityArea").is(":hidden")) {
                    //    bool = false;
                    //} else {
                    //    bool = true;
                    //}

                    //if (bool) {
                    //    $("#cityArea").hide();
                    //    $("#farmArea").hide();
                    //    $(this).css("background-position-y;", "-10px");
                    //} else {
                    //    if ($("#farmArea").is(":hidden")) {
                    //        type = "cityArea";
                    //    } else {
                    //        type = "farmArea";
                    //    }
                    //    if (type == "cityArea") {
                    //        $("#farmArea").show();
                    //    } else {
                    //        $("#cityArea").show();
                    //    }
                    //    $(this).css("background-position-y;", "10px");
                    //}

                    


                })
                $("#farmArea img").click(function () {
                    $(".infocontent").hide();
                    map.infoWindow.hide();
            
                })
                $("#proSelect a").click(function () {
                    var proName = $(this).attr("value");
                    var areaNmae = $(this).text();
                    // alert(proName + ";" + areaNmae);
                    // alert($(".sel-fun button").text());
                    $(".sel-fun button").text(areaNmae);
                    $(".sel-fun button").append("<span class=\"caret\"></span>")
                    $("#cityArea").show();
                    // $(".infocontent").show();
                    //if (map.getLayer("clusters")) {
                    //    map.removeLayer(map.getLayer("clusters"));
                    //}
                    //if (map.getLayer("ls")) {
                    //    map.removeLayer(map.getLayer("ls"));
                    //}
                    //if (areaNmae != "浙江") {
                    //    sssy = areaNmae;
                    //    //  map.enableScrollWheelZoom();

                    //} else {
                    //    sssy = "";
                    //    //   map.disableScrollWheelZoom();
                    //    addZJBorder();
                    //    addZJCityBorder();
                    //}
                    sssy = areaNmae;
                    ssqy = "";
                    getsubArea(proName);

                    $("#farmArea").hide();
                    $(".infocontent>img").click(function () {
                        $(".infocontent").hide();


                    })

                })

                $("#search input").keyup(function () {
                    if ($("#search input").val() == "") {
                        $(".clearinput").hide();
                    }
                    else {
                        $(".clearinput").show();
                    }

                })
                $("#searchList ul").on("click", "li", function () {
                    $("#searchList ul li").css("background-color", "#fff");
                    $(this).css("background-color", "#0094ff ");

                    var index = Number($(this).attr("index"));

                    tempLayer.clear();
                    var lat = Number($(this).attr("x"));
                    var lng = Number($(this).attr("y"));


                    var sfs = new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID, new SimpleLineSymbol(SimpleLineSymbol.STYLE_DASHDOT, new Color([0, 0, 255]), 2), new Color([255, 255, 0, 0.25]));
                    var polygon = searchLayer.graphics[index].geometry;
                    var attr = searchLayer.graphics[index].attributes;
                    var tempGraphic = new Graphic(polygon, sfs, searchLayer.graphics[index], attr);
                    // tempGraphic.setSymbol(sfs);
                    tempLayer.add(tempGraphic);
                    // searchLayer.graphics[index].set

                    var cp = polygon.getExtent().getCenter;
                    var content;
                    require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                        content = IdentifyTask.getShowInfo(attr);
                    });
                   
                  //  map.infoWindow.setTitle("属性信息");
                    map.infoWindow.setContent(content);
                    map.infoWindow.show(cp);
                    //tempLayer.on("graphic-add", function (e) {
                    //    var content = IdentifyTask.getShowInfo(e.graphic.attributes);
                    //    map.infoWindow.setTitle("属性信息");
                    //    map.infoWindow.setContent(content);
                    //    map.infoWindow.show(cp);
                    //})
                    map.centerAndZoom([lat, lng], upLevel + 1);
                    map.infoWindow.show(cp);
                })
                $("#searchBtn").click(function () {
                    searchLayer.clear();
                    tempLayer.clear();
                    console.log($("#search input").val());
                    if ($("#search input").val() != "") {
                        $("#farmArea").hide();

                        $("#cityArea").hide();
                        require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                            searchSql = SwitchLayer.getSearchSql($("#search input").val());
                            IdentifyTask.queryBySearch();
                        });
                      
                    } else {
                        alert("请输入名称");
                    }


                });
                $(".clearinput").click(function () {
                    $("#search input").val("");
                    $(this).hide();
                    $("#searchList ul").html("");
                    $("#searchList").hide();
                    searchLayer.clear();
                    tempLayer.clear();
                    map.infoWindow.hide();
                });
                var type = "farmArea";
                var bool = true;
                $(".sel-fun img").click(function () {
                    if ($("#farmArea").is(":hidden") && $("#cityArea").is(":hidden")) {
                        bool = false;
                    } else {
                        bool = true;
                    }

                    if (bool) {
                        $("#cityArea").hide();
                        $("#farmArea").hide();
                    } else {
                        if ($("#farmArea").is(":hidden")) {
                            type = "cityArea";
                        } else {
                            type = "farmArea";
                        }
                        if (type == "cityArea") {
                            $("#farmArea").show();
                        } else {
                            $("#cityArea").show();
                        }
                    }


                })

                $("#proSelect").on("change", function () {
                    //  console.log($(this).find("option:checked").text());
                    var proName = $(this).find("option:checked").val();
                    var areaNmae = $(this).find("option:checked").text();
                    $("#cityArea").show();
                    // $(".infocontent").show();
                    sssy = areaNmae;
                    ssqy = "";
                    getsubArea(proName);

                    $("#farmArea").hide();
                    $(".infocontent>img").click(function () {
                        $(".infocontent").hide();


                    })
                })


                //切换底图
                var MapMenu = dojo.query(".MapMenu a");
                on(MapMenu[0], "click", function (e) {
                    //  filterReset();
                    domClass.remove(MapMenu[1], "Mapsatellite1");
                    domClass.add(MapMenu[1], "Mapsatellite");
                    domClass.add(MapMenu[0], "Mapmap1");
                    showLayer("VECTOR");
                      textColor = "#000";

                });
                on(MapMenu[1], "click", function (e) {
                    //  filterReset();
                    domClass.remove(MapMenu[0], "Mapmap1");
                    domClass.add(MapMenu[0], "Mapmap");
                    domClass.add(MapMenu[1], "Mapsatellite1");
                    showLayer("RASTER");
                    textColor = "#fff";

                });
                //市点击事件
                $("#cityArea .control").on("click", ".sj", "", clickSArea);
                //县级事件
                $("#cityArea .control").on("click", ".xj", "", clickArea);
            }

          
            //获取区县
            function getblcok(city) {

                if (city == "浙江") {
                    var htm = "";
                    $.ajax({//生成各市级
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var value = $(ele).attr("value");
                                var name = $(ele).attr("name");
                                htm += "<span bh=" + id + " class='pt sj' id='std" + (index + 1) + "'>" + name + "</span>";
                            })
                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(htm);
                        }
                    })

                } else {
                    $.ajax({//生成各县级
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            var html = "";
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var name = $(ele).attr("name");
                                if (name == city) {
                                    $(ele).find("xjzone").each(function (indexx, elex) {
                                        var xjid = $(elex).attr("id");
                                        var xjName = $(elex).attr("name");
                                        var xjLat = $(elex).attr("lat");
                                        var xjLng = $(elex).attr("lng");
                                        var hasXjvalue = $(elex).attr("value");
                                        var url = $(elex).attr("url");
                                        var layerindex;
                                        if ($(elex).attr("layerindex") != "") {
                                            layerindex = $(elex).attr("layerindex");
                                        } else {
                                            layerindex = 0;
                                        }
                                        var xjvalue = 0;
                                        if (hasXjvalue) {
                                            xjvalue = hasXjvalue;
                                        }
                                        html += "<span xjid=" + xjid + " xjName=" + xjName + " xjLat=" + xjLat + " xjLng=" + xjLng + " class='pt xj' id='xjtd" + xjid + "'>" + xjName + "</span>";
                                    });
                                }
                            });

                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(html);
                        }
                    });
                }

            }

            //获取下一级
            function getsubArea(i) {
                //  ResetLayer();
                //  map.enableScrollWheelZoom();
                if (map.getLayer("cityLayer")) {
                    map.removeLayer(map.getLayer("cityLayer"));
                    map.removeLayer(map.getLayer("cityTextLayer"));
                }
                // ssqy = "";
                var areaId = i;

                if (map != undefined && areaId == "") {
                    map.centerAndZoom([120.19, 30.26], downLevel);
                }

                if (areaId == "浙江") {
                    // $("#function").hide();
                    //  document.getElementById("areaName").innerHTML = "浙江省";
                    // document.getElementById("areaNum").innerHTML = "";
                    var htm = "";
                    $.ajax({//生成各市级
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {

                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var value = $(ele).attr("value");
                                var name = $(ele).attr("name");


                                htm += "<span bh=" + id + " class='pt sj' id='std" + (index + 1) + "'>" + name + "</span>";
                            })
                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(htm);
                            map.centerAndZoom([120.19, 30.26], downLevel);
                        }
                    })
                    //var htm = "";

                    //htm += "<span onclick='clickSArea(3302);' class='pt' id='std" + 2 + "'>宁波市(<em id='areaNum3302'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3303);' class='pt' id='std" + 3 + "'>温州市(<em id='areaNum3303'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3304);' class='pt' id='std" + 4 + "'>嘉兴市(<em id='areaNum3304'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3305);' class='pt' id='std" + 5 + "'>湖州市(<em id='areaNum3305'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3306);' class='pt' id='std" + 6 + "'>绍兴市(<em id='areaNum3306'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3307);' class='pt' id='std" + 7 + "'>金华市(<em id='areaNum3307'>27179</em>)</span>";
                    //htm += "<span onclick='clickSArea(3308);' class='pt' id='std" + 8 + "'>衢州市(<em id='areaNum3308'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3309);' class='pt' id='std" + 9 + "'>舟山市(<em id='areaNum3309'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3310);' class='pt' id='std" + 10 + "'>台州市(<em id='areaNum3310'>0</em>)</span>";
                    //htm += "<span onclick='clickSArea(3311);' class='pt' id='std" + 11 + "'>丽水市(<em id='areaNum3311'>0</em>)</span>";


                } else {
                    // $("#function").show();
                    //var sql = "\"地市名称\"='" + sssy + "'";
                    //addDynamicLayer(sql);

                    $.ajax({//生成各县级
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            var html = "";
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var name = $(ele).attr("name");
                                if (areaId == id) {
                                    var lat = Number($(ele).attr("lat"));
                                    var lng = Number($(ele).attr("lng"));

                                    if (map != undefined) {
                                        map.centerAndZoom([lat, lng], mapconfig.minZoom + 1);
                                    }
                                    $(ele).find("xjzone").each(function (indexx, elex) {
                                        var xjid = $(elex).attr("id");
                                        var xjName = $(elex).attr("name");
                                        var xjLat = $(elex).attr("lat");
                                        var xjLng = $(elex).attr("lng");
                                        var hasXjvalue = $(elex).attr("value");
                                        var url = $(elex).attr("url");
                                        var layerindex;
                                        if ($(elex).attr("layerindex") != "") {
                                            layerindex = $(elex).attr("layerindex");
                                        } else {
                                            layerindex = 0;
                                        }
                                        var xjvalue = 0;
                                        if (hasXjvalue) {
                                            xjvalue = hasXjvalue;
                                        }
                                        //  html += "<span onclick='clickArea(" + xjid + ",\"" + xjName + "\"," + xjLat + "," + xjLng + "," + layerindex + ",\"" + url + "\");' class='pt' id='xjtd" + xjid + "'>" + xjName + "(<em id='areaNum" + xjid + "'>" + xjvalue + "</em>)</span>";
                                        html += "<span xjid=" + xjid + " xjName=" + xjName + " xjLat=" + xjLat + " xjLng=" + xjLng + " class='pt xj' id='xjtd" + xjid + "'>" + xjName + "</span>";
                                    });
                                }
                            });

                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(html);
                        }
                    });
                }

                // var sjname = $('#areaId option:selected').text();
                //   var sjid = $('#areaId option:selected').val() + "00";
                // showSjBorder(sjid, sjname);
                //   getCityChart(sjname);
                //计算数量
                //getNumsByAreaCode();
                //if (map != undefined) {
                //    loadGetPointData();
                //}
            }
            //各区点击事件
            function clickSArea(i) {
                // onclick = 'clickSArea(" + id + ")'
                // $("#areaId").val(i);
                // ResetLayer();
                sssy = $(this).text();
                var areaNmae = $(this).text();
                // alert(proName + ";" + areaNmae);
                // alert($(".sel-fun button").text());
                $(".sel-fun button").text(areaNmae);
                $(".sel-fun button").append("<span class=\"caret\"></span>")
                ssqy = "";
                getsubArea($(this).attr("bh"));


            }
            //各县点击事件
            function clickArea(xjid, xjname, lat, lng, layerindex, url) {
                //  currentLayerServiceUrl = url;
                //  currentLayerIndex = [layerindex];
                var xjid = $(this).attr("xjid");
                var xjname = $(this).attr("xjname");
                var lat = $(this).attr("xjlat");
                var lng = $(this).attr("xjlng");

                if (map != undefined) {
                    // var zoom = map.getZoom();
                    map.centerAndZoom([parseFloat(lat), parseFloat(lng)], mapconfig.maxZoom + 1);
                    //sj_layer.setVisibleLayers([layerindex]);
                }
                ssqy = xjname;
                var areaNmae = $(this).text();
                // alert(proName + ";" + areaNmae);
                // alert($(".sel-fun button").text());
                $(".sel-fun button").text(areaNmae);
                $(".sel-fun button").append("<span class=\"caret\"></span>")



                //如果按下的pt
                if ($("#xjtd" + xjid).hasClass("ptdown")) {
                    $(".ptdown").each(function (index, ele) {
                        $(ele).removeClass();
                        $(ele).addClass("xj ptdown");
                    });
                    $("#xjtd" + xjid).removeClass("ptdown");
                    $("#xjtd" + xjid).addClass("xj pt");
                } else {
                    $(".ptdown").each(function (index, ele) {
                        $(ele).removeClass();
                        $(ele).addClass("xj pt");
                    });
                    $("#xjtd" + xjid).removeClass();
                    $("#xjtd" + xjid).addClass("xj ptdown");
                }
                var fileid = xjid.toString().substring(0, 4) + "00";
                //  showXjBorder(fileid, xjname);显示县级边界
                // loadGetPointData(xjid);
                //  console.log(fileid);
            }

            //切换底图
            function showLayer(maptype) {
                //   alert(1);
                require(["TDTLayer", "TDTLayer_Anno"], function (TDTLayer, TDTLayer_Anno) {
                    if (maptype == "VECTOR") {
                        if (map.layerIds.length > 0) {
                            var rmap = map.getLayer(map.layerIds[0]);
                            var rmap_anno = map.getLayer(map.layerIds[1]);
                            map.removeLayer(rmap);
                            if (rmap_anno) {
                                map.removeLayer(rmap_anno);
                            }
                            // $(".MapMenu input").attr("data-state", "check");
                        }
                        var layer = new TDTLayer("vec");//影像img 矢量 vec
                        map.addLayer(layer, 0);
                        if ($(".MapMenu input[value='矢量注记']").attr("data-state") == "check") {
                            var annolayer = new TDTLayer_Anno("cva");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                        }
                        //  var annolayer = new TDTLayer_Anno("cva");//影像cia 矢量cva
                        //   map.addLayer(annolayer, 1);
                    }
                    else {
                        if (map.layerIds.length > 0) {
                            var rmap = map.getLayer(map.layerIds[0]);
                            var rmap_anno = map.getLayer(map.layerIds[1]);
                            if (rmap_anno) {
                                map.removeLayer(rmap_anno);
                            }
                            map.removeLayer(rmap);

                        }
                        var layer = new TDTLayer("img");//影像img 矢量 vec
                        map.addLayer(layer, 0);
                        if ($(".MapMenu input[value='影像注记']").attr("data-state") == "check") {
                            var annolayer = new TDTLayer_Anno("cia");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                        }
                        //  var annolayer = new TDTLayer_Anno("cia");//影像cia 矢量cva
                        //  map.addLayer(annolayer, 1);
                    }
                })
            }

        });
    </script>
</head>

<body>

    <div class="left">
        <div class="top">
            <div id="search" class="fl">
                <input type="text" placeholder="输入关键词">

                <a id="searchBtn" href="javascript:void (0)" class="fr"><img src="images/search.png"></a>
                <a href="javascript:void (0)" class="fr clearinput"><img src="images/searchX.png"></a>
            </div>

            <div class="sel-fun">
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle"
                            data-toggle="dropdown">
                        浙江 <span class="caret"></span>
                    </button>
                    <ul name="" id="proSelect" role="menu" class="dropdown-menu province" aria-labelledby="dropdownMenu1">
                        <li><a href="#" value="浙江">浙江</a></li>
                        <li><a href="#" value="3301">杭州市</a></li>
                        <li><a href="#" value="3302">宁波市</a></li>
                        <li><a href="#" value="3303">温州市</a></li>
                        <li><a href="#" value="3304">嘉兴市</a></li>
                        <li><a href="#" value="3305">湖州市</a></li>
                        <li><a href="#" value="3306">绍兴市</a></li>
                        <li><a href="#" value="3307">金华市</a></li>
                        <li><a href="#" value="3308">衢州市</a></li>
                        <li><a href="#" value="3309">舟山市</a></li>
                        <li><a href="#" value="3310">台州市</a></li>
                        <li><a href="#" value="3311">丽水市</a></li>
                    </ul>
                </div>
                <!--<select name="" id="proSelect" class="province">
                    <option value="浙江">浙江</option>
                    <option value="3301">杭州市</option>
                    <option value="3302">宁波市</option>
                    <option value="3303">温州市</option>
                    <option value="3304">嘉兴市</option>
                    <option value="3305">湖州市</option>
                    <option value="3306">绍兴市</option>
                    <option value="3307">金华市</option>
                    <option value="3308">衢州市</option>
                    <option value="3309">舟山市</option>
                    <option value="3310">台州市</option>
                    <option value="3311">丽水市</option>
                </select>-->
                <!--<img src="images/select.png">-->
                <div id="totalNumber"><span id="total"></span></div> 
                <!--<span class="function" id="function">功能</span>-->
                <div id ="function"></div>

            </div>

        </div>
        <div id="farmArea" class="infocontent" style="display: none">
            <img src="images/close.png" class="fr">
            <div class="control">
                <ul class="btns">
                    <li class="ls active">粮食生产功能区</li>
                    <li class="yq">现代农业园区</li>
                    <li class="nt">标准农田</li>
                </ul>
                <ul class="second ls-infocontent" style="display: block">
                    <li class="active gn">功能区级别</li>
                    <li class="zt">建设状态</li>
                    <li class="mj">建设面积</li>
                    <li class="nf">建设年份</li>
                </ul>
                <ul class="second yq-infocontent" style="display: none">
                    <!--<li class="xdny">现代农业综合区</li>-->
                    <li class="zdcy" style="margin-left: 80px;">主导产业示范区</li>
                    <li class="tsny">特色农业精品区</li>
                </ul>
                <ul class="second nt-infocontent" style="display: none">
                    <li class="cgxm" style="margin-left: 80px;">千万亩工程项目</li>
                    <li class="bznt">标准农田建设区</li>
                    <!--<li class="cbxm">储备项目</li>
                    <li class="tsgc">提升工程</li>-->
                </ul>
            </div>
            <div class="checks">
                <ul class="gn" value="建设等级" style="display: block">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                               
                                <img src="images/gis/省市县/左侧栏示例/省-左侧栏示例.png" />
                                <input type="checkbox" id="1">
                                <label class="active" for="1" data-state="check" imgvalue="images/gis/省市县/省.png"></label>
                                <span>省级</span>
                            </li>
                            <li>
                                <!--<img src="images/city.png">-->
                                
                                <img src="images/gis/省市县/左侧栏示例/市-左侧栏示例.png" />
                                <input type="checkbox" id="2">
                                <label class="active" for="2" data-state="check" imgvalue="images/gis/省市县/市.png"></label>
                                <span>市级</span>
                            </li>
                            <li>
                                <!--<img src="images/county.png">-->
                                <img src="images/gis/省市县/左侧栏示例/县-左侧栏示例.png" />
                                <input type="checkbox" id="3">
                                <label class="active" for="3" data-state="check" imgvalue="images/gis/省市县/县.png"></label>
                                <span>县级</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="zt" value="建设状态" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                               
                                <img src="images/gis/建设状态/左侧栏示例/已建-左侧栏示例.png" />
                                <!--<img src="images/gis/建设状态/已建.png" />-->
                                <input type="checkbox" id="1">
                                <label for="1" data-state="uncheck" imgvalue="images/gis/建设状态/已建.png"></label>
                                <span>已建</span>
                            </li>
                            <li>
                                <!--<img src="images/city.png">-->
                                <!--<img src="images/gis/建设状态/在建.png" />-->
                                <img src="images/gis/建设状态/左侧栏示例/在建-左侧栏示例.png" />
                                <input type="checkbox" id="2">
                                <label for="2" data-state="uncheck" imgvalue="images/gis/建设状态/在建.png"></label>
                                <span>在建</span>
                            </li>
                            <li>
                                <!--<img src="images/county.png">-->
                                <!--<img src="images/gis/建设状态/拟建.png" />-->
                                <img src="images/gis/建设状态/左侧栏示例/拟建-左侧栏示例.png" />
                                <input type="checkbox" id="3">
                                <label for="3" data-state="uncheck" imgvalue="images/gis/建设状态/拟建.png"></label>
                                <span>拟建</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="mj" value="认定面积" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                               
                                <img src="images/gis/建设面积/左侧栏示例/大于1000亩-左侧栏示例.png" />
                                <input type="checkbox" id="1"> 
                                <label for="1" data-state="uncheck" imgvalue="images/gis/建设面积/大于1000亩.png"></label>
                                <span>大于1000亩</span>
                            </li>
                            <li style="width: 124px;margin-right: 34px">
                                <!--<img src="images/city.png">-->
                                <img src="images/gis/建设面积/左侧栏示例/500-1000亩-左侧栏示例.png" />
                                <input type="checkbox" id="2">
                                <label for="2" data-state="uncheck" imgvalue="images/gis/建设面积/500-1000亩.png"></label>
                                <span>500~1000亩</span>
                            </li>
                            <li>
                                <!--<img src="images/county.png">-->
                                <img src="images/gis/建设面积/左侧栏示例/200-500亩-左侧栏示例.png" />
                                <input type="checkbox" id="3">
                                <label for="3" data-state="uncheck" imgvalue="images/gis/建设面积/200-500亩.png"></label>
                                <span>200~500亩</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                                <img src="images/gis/建设面积/左侧栏示例/小于200亩-左侧栏示例.png" />
                                <input type="checkbox" id="1">
                                <label for="1" data-state="uncheck" imgvalue="images/gis/建设面积/小于200亩.png"></label>
                                <span>小于200亩</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="nf" value="建设认定年" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time1.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2017-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2017.png"></label>
                                <span>2017</span>
                            </li>
                            <li>
                                <!--<img src="images/time2.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2016-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2016.png"></label>
                                <span>2016</span>
                            </li>
                            <li>
                                <!--<img src="images/time3.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2015-左侧栏示例.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck" imgvalue="images/gis/建设年份/2015.png"></label>
                                <span>2015</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time4.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2014-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2014.png"></label>
                                <span>2014</span>
                            </li>
                            <li>
                                <!--<img src="images/time5.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2013-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2013.png"></label>
                                <span>2013</span>
                            </li>
                            <li>
                                <!--<img src="images/time6.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2012-左侧栏示例.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck" imgvalue="images/gis/建设年份/2012.png"></label>
                                <span>2012</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time7.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2011-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2011.png"></label>
                                <span>2011</span>
                            </li>
                            <li>
                                <!--<img src="images/time8.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2010-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2010.png"></label>
                                <span>2010</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="xdny" value="" style="display: none">
                    <li>
                        <ul>
                            <li >
                                <!--<img src="images/province.png">-->
                                <img src="images/gis/现代农业综合区/创建点.png" />
                                <input type="checkbox" id="xdnyCjd">
                                <label for="1" data-state="uncheck" imgvalue="" ></label>
                                <span>创建点</span>
                            </li>
                            <li >
                                <!--<img src="images/city.png">-->
                                <img src="images/gis/现代农业综合区/已认定.png" />
                                <input type="checkbox" id="xdnyYrz">
                                <label for="2" data-state="uncheck" imgvalue="" ></label>
                                <span>已认证</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul style="display: none;" value="产业类型" class="zdcy">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/xm.png">-->
                                <img src="images/gis/产业类别/畜牧类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>畜牧类</span>
                            </li>
                            <li>
                                <!--<img src="images/sc.png">-->
                                <img src="images/gis/产业类别/蔬菜瓜果类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>蔬菜瓜果</span>
                            </li>
                            <li>
                                <!--<img src="images/syj.png">-->
                                <img src="images/gis/产业类别/食用菌类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>食用菌类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/sg.png">-->
                                <img src="images/gis/产业类别/水果类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>水果类</span>
                            </li>
                            <li>
                                <!--<img src="images/cy.png">-->
                                <img src="images/gis/产业类别/茶叶类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>茶叶类</span>
                            </li>
                            <li>
                                <!--<img src="images/changsan.png">-->
                                <img src="images/gis/产业类别/蚕桑类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>蚕桑类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/zyc.png">-->
                                <img src="images/gis/产业类别/中药材类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>中药材类</span>
                            </li>
                            <li>
                                <!--<img src="images/huahui.png">-->
                                <img src="images/gis/产业类别/花卉苗木类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>花卉苗木类</span>
                            </li>
                            <li>
                                <!--<img src="images/zhumu.png">-->
                                <img src="images/gis/产业类别/竹木类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>竹木类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/jingji.png">-->
                                <img src="images/gis/产业类别/经济林类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>经济林类</span>
                            </li>
                            <li>
                                <!--<img src="images/yuye.png">-->
                                <img src="images/gis/产业类别/渔业类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>渔业类</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul style="display: none;" value="产业类型" class="tsny">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/xm.png">-->
                                <img src="images/gis/产业类别/畜牧类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>畜牧类</span>
                            </li>
                            <li>
                                <!--<img src="images/sc.png">-->
                                <img src="images/gis/产业类别/蔬菜瓜果类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>蔬菜瓜果</span>
                            </li>
                            <li>
                                <!--<img src="images/syj.png">-->
                                <img src="images/gis/产业类别/食用菌类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>食用菌类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/sg.png">-->
                                <img src="images/gis/产业类别/水果类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>水果类</span>
                            </li>
                            <li>
                                <!--<img src="images/cy.png">-->
                                <img src="images/gis/产业类别/茶叶类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>茶叶类</span>
                            </li>
                            <li>
                                <!--<img src="images/changsan.png">-->
                                <img src="images/gis/产业类别/蚕桑类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>蚕桑类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/zyc.png">-->
                                <img src="images/gis/产业类别/中药材类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>中药材类</span>
                            </li>
                            <li>
                                <!--<img src="images/huahui.png">-->
                                <img src="images/gis/产业类别/花卉苗木类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>花卉苗木类</span>
                            </li>
                            <li>
                                <!--<img src="images/zhumu.png">-->
                                <img src="images/gis/产业类别/竹木类.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck"></label>
                                <span>竹木类</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/jingji.png">-->
                                <img src="images/gis/产业类别/经济林类.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck"></label>
                                <span>经济林类</span>
                            </li>
                            <li>
                                <!--<img src="images/yuye.png">-->
                                <img src="images/gis/产业类别/渔业类.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck"></label>
                                <span>渔业类</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="cgxm" value="等级" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                                
                                <img src="images/gis/标准农田/左侧栏示例/一等田-左侧栏示例.png" />
                                <input type="checkbox" id="1">
                                <label for="1" data-state="uncheck" imgvalue="images/gis/标准农田/一等田.png"></label>
                                <span value="1">一等田</span>
                            </li>
                            <li>
                                <img src="images/gis/标准农田/左侧栏示例/二等田-左侧栏示例.png" />
                                <input type="checkbox" id="2">
                                <label for="2" data-state="uncheck" imgvalue="images/gis/标准农田/二等田.png"></label>
                                <span value="2">二等田</span>
                            </li>
                            <li>
                                <!--<img src="images/county.png">-->
                                <img src="images/gis/标准农田/左侧栏示例/三等田-左侧栏示例.png" />
                                <input type="checkbox" id="3">
                                <label for="3" data-state="uncheck" imgvalue="images/gis/标准农田/三等田.png"></label>
                                <span value="3">三等田</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="bznt" value="项目名称" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                                
                                <img src="images/gis/标准农田/左侧栏示例/建设分布图-左侧栏示例.png" />
                                <input type="checkbox" id="1">
                                <label for="1" data-state="uncheck" imgvalue="images/gis/标准农田/建设分布图.png"></label>
                                <span value="建设分布图">建设分布图</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="cbxm" value="等级" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/province.png">-->
                                <img src="images/gis/标准农田/左侧栏示例/一等田-左侧栏示例.png" />
                                <input type="checkbox" id="1">
                                <label for="1" data-state="uncheck" imgvalue="images/gis/标准农田/一等田.png"></label>
                                <span value="1">一等田</span>
                            </li>
                            <li>
                                <!--<img src="images/city.png">-->
                                <img src="images/gis/标准农田/左侧栏示例/二等田-左侧栏示例.png" />
                                <input type="checkbox" id="2">
                                <label for="2" data-state="uncheck" imgvalue="images/gis/标准农田/二等田.png"></label>
                                <span value="2">二等田</span>
                            </li>
                            <li>
                                <!--<img src="images/county.png">-->
                                <img src="images/gis/标准农田/左侧栏示例/三等田-左侧栏示例.png" />
                                <input type="checkbox" id="3">
                                <label for="3" data-state="uncheck" imgvalue="images/gis/标准农田/三等田.png"></label>
                                <span value="3">三等田</span>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="tsgc" value="" style="display: none">
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time1.png">-->

                                <img src="images/gis/建设年份/左侧栏示例/2017-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2017.png"></label>
                                <span>2017</span>
                            </li>
                            <li>
                                <!--<img src="images/time2.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2016-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2016.png"></label>
                                <span>2016</span>
                            </li>
                            <li>
                                <!--<img src="images/time3.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2015-左侧栏示例.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck" imgvalue="images/gis/建设年份/2015.png"></label>
                                <span>2015</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time4.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2014-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2014.png"></label>
                                <span>2014</span>
                            </li>
                            <li>
                                <!--<img src="images/time5.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2013-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2013.png"></label>
                                <span>2013</span>
                            </li>
                            <li>
                                <!--<img src="images/time6.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2012-左侧栏示例.png" />
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck" imgvalue="images/gis/建设年份/2012.png"></label>
                                <span>2012</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <ul>
                            <li>
                                <!--<img src="images/time7.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2011-左侧栏示例.png" />
                                <input type="checkbox" id="4">
                                <label for="4" data-state="uncheck" imgvalue="images/gis/建设年份/2011.png"></label>
                                <span>2011</span>
                            </li>
                            <li>
                                <!--<img src="images/time8.png">-->
                                <img src="images/gis/建设年份/左侧栏示例/2010-左侧栏示例.png" />
                                <input type="checkbox" id="5">
                                <label for="5" data-state="uncheck" imgvalue="images/gis/建设年份/2010.png"></label>
                                <span>2010</span>
                            </li>
                            <li>
                                <img src="images/gis/建设年份/左侧栏示例/2009-左侧栏示例.png">
                                <input type="checkbox" id="6">
                                <label for="6" data-state="uncheck" imgvalue="images/time9.pn"></label>
                                <span>2009</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div id="cityArea" class="infocontent" style="display: none">
            <img src="images/close.png" class="fr">
            <div class="control areaControl">


            </div>
            <!--<div class="checks">


            </div>-->
        </div>
    </div>
    <div data-dojo-type="dijit/layout/BorderContainer"
         data-dojo-props="design:'headline',gutters:false"
         style="width: 100%; height: 100%; margin: 0;">


        <div id="map"
             data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="region:'center'">
        </div>
        <div id="typeinfo"></div>
        <div id="searchList"><ul></ul></div>
    </div>
    <div class="MapMenu">
        <a href="javascript:void(0)" title="矢量地图" class="Mapmap">
            <label><input name="矢量注记" type="checkbox" data-state="uncheck" value="矢量注记" />矢量注记</label>
        </a>
        <a href="javascript:void(0)" title="影像地图" class="Mapsatellite1">
            <label><input name="影像注记" type="checkbox" data-state="uncheck" value="影像注记" />影像注记</label>
        </a>

    </div>
</body>
</html>
